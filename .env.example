# =============================================================================
# DRIVETUNING - Production Environment Variables
# =============================================================================
# Copy this file to .env and fill in all values before deployment

# -----------------------------------------------------------------------------
# DATABASE (Neon PostgreSQL Free Tier)
# -----------------------------------------------------------------------------
# Get these from your Neon console: https://console.neon.tech
# Create a new project and select "Free Tier"

POSTGRES_PRISMA_URL="postgresql://user:pass@ep-cool-name-123456.us-east-2.aws.neon.tech/drivetuning?sslmode=require"
POSTGRES_URL_NON_POOLING="postgresql://user:pass@ep-cool-name-123456.us-east-2.aws.neon.tech/drivetuning?sslmode=require"

# Use POSTGRES_PRISMA_URL for Prisma (auto-connection pooling)
DATABASE_URL="${POSTGRES_PRISMA_URL}"
DIRECT_URL="${POSTGRES_URL_NON_POOLING}"

# Use PostgreSQL schema in CI/production client generation
PRISMA_SCHEMA="prisma/schema.postgres.prisma"

# -----------------------------------------------------------------------------
# NEXTAUTH (Authentication)
# -----------------------------------------------------------------------------
# Generate a secure 64-char secret:
# Linux/Mac: openssl rand -hex 32
# Windows (PowerShell):
#   $bytes = New-Object byte[] 32; [System.Security.Cryptography.RandomNumberGenerator]::Fill($bytes); [Convert]::ToBase64String($bytes)

NEXTAUTH_SECRET="your-64-char-secret-here-use-openssl-rand-hex-32"
NEXTAUTH_URL="https://drivetuning.vercel.app"

# -----------------------------------------------------------------------------
# VERCEL BLOB (Image Storage)
# -----------------------------------------------------------------------------
# Get from Vercel Dashboard: https://vercel.com/dashboard/blob
# Run: npx vercel link (to link your project)
BLOB_READ_WRITE_TOKEN="vercel_blob_rw_xxxxx"

# -----------------------------------------------------------------------------
# STRIPE (Marketplace Commerce)
# -----------------------------------------------------------------------------
# Payments are feature-flagged. Keep disabled for public launch until ready.
NEXT_PUBLIC_MARKET_COMMERCE_ENABLED="false"
MARKET_COMMERCE_ENABLED="false"
# Optional: protect cron-style internal endpoints (e.g. release stale reservations).
# If set, call internal endpoints with header: `x-cron-secret: <CRON_SECRET>`
CRON_SECRET=""
# Base URL used for Stripe success/cancel redirects (no trailing slash)
NEXT_PUBLIC_APP_URL="http://localhost:3000"
# Required for Stripe API calls + webhooks
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# -----------------------------------------------------------------------------
# CLOUDINARY (Optional - for advanced image transformations)
# -----------------------------------------------------------------------------
# Get from Cloudinary Dashboard: https://cloudinary.com/console
CLOUDINARY_CLOUD_NAME=""
CLOUDINARY_API_KEY=""
CLOUDINARY_API_SECRET=""

# -----------------------------------------------------------------------------
# OPTIONAL: Analytics & Monitoring
# -----------------------------------------------------------------------------
# VERCEL_ANALYTICS_ID=""  # Enable Vercel Analytics (auto-detected)
# SENTRY_DSN=""          # Enable Sentry error tracking

# -----------------------------------------------------------------------------
# OPTIONAL: Privacy / Consent Log
# -----------------------------------------------------------------------------
# Used to salt-hash viewer fingerprints for ShareLinkView.viewerHash.
# Keep secret and stable between deployments to avoid changing hashes.
VIEWER_HASH_SALT="change-me-to-a-random-secret"

# Retention for ShareLinkView analytics (GDPR-friendly default).
# Set to 0 to disable cleanup (not recommended).
SHARE_LINK_VIEW_RETENTION_DAYS="30"

# Salt for hashing rate-limit identifiers (IP/user). If omitted, NEXTAUTH_SECRET is used.
RATE_LIMIT_SALT="change-me-to-a-random-secret"

# -----------------------------------------------------------------------------
# OPTIONAL: Admin / Moderation
# -----------------------------------------------------------------------------
# Comma-separated lists. Used for admin-only pages (e.g. legality contribution moderation).
ADMIN_EMAILS=""
ADMIN_USER_IDS=""

# -----------------------------------------------------------------------------
# LEGAL (Impressum / Datenschutz / AGB / Widerruf)
# -----------------------------------------------------------------------------
# IMPORTANT: These values must be filled with your real operator/company details before launch.
DT_LEGAL_OPERATOR_NAME="DriveTuning GmbH"
DT_LEGAL_ADDRESS="Musterstrasse 1, 12345 Musterstadt, Deutschland"
DT_LEGAL_EMAIL="kontakt@example.com"
DT_LEGAL_PHONE=""
DT_LEGAL_REPRESENTATIVE="Max Mustermann"
DT_LEGAL_REGISTER="HRB 12345, Amtsgericht Musterstadt"
DT_LEGAL_VAT_ID="DE123456789"
DT_LEGAL_CONTENT_RESPONSIBLE="Max Mustermann"
# Format: YYYY-MM-DD
DT_LEGAL_LAST_UPDATED="2026-02-07"
